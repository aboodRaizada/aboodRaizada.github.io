(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"St/x":function(t,i,e){"use strict";e.r(i),e.d(i,"AppsNotificationsModule",function(){return D});var n=e("SVse"),o=e("FpXt"),a=e("iInd"),c=e("mrSG"),s=e("3bzS"),r=e("AytR"),l=e("PSD3"),p=e.n(l),b=e("8Y7J"),d=e("TSSN"),m=e("jy+X"),f=e("0dPT"),u=e("SOeY"),h=e("s7LF"),g=e("Q2Ze"),v=e("ZTz/"),N=e("UhP/"),F=e("e6WT"),Y=e("vrAh"),Z=e("Dxy4"),I=e("pu8Q"),C=e("f44v");const L=["driversInput"];function A(t,i){1&t&&(b.Zb(0,"mat-hint"),b.Zb(1,"span",38),b.Lc(2),b.lc(3,"translate"),b.Yb(),b.Yb()),2&t&&(b.Fb(2),b.Nc(" ",b.mc(3,1,"appNotifications.selectFromSelections")," "))}function T(t,i){1&t&&(b.Zb(0,"mat-option"),b.Ub(1,"mat-spinner",39),b.Yb())}function O(t,i){if(1&t&&(b.Zb(0,"mat-option",40),b.Zb(1,"span",41),b.Lc(2),b.Yb(),b.Yb()),2&t){const t=i.$implicit;b.qc("value",t),b.Fb(2),b.Oc(" ",t.firstName," ",t.familyName," ")}}function S(t,i){if(1&t){const t=b.ac();b.Zb(0,"button",35),b.gc("click",function(){b.Ec(t),b.kc();const i=b.Cc(7);return b.kc().clearSendingValue(i)}),b.Ub(1,"i",42),b.Yb()}}function w(t,i){if(1&t){const t=b.ac();b.Zb(0,"div",1),b.Zb(1,"div",8),b.Zb(2,"mat-form-field",28),b.Zb(3,"mat-label"),b.Lc(4),b.lc(5,"translate"),b.Yb(),b.Ub(6,"input",29,30),b.Kc(8,A,4,3,"mat-hint",31),b.Zb(9,"mat-autocomplete",32,33),b.gc("optionSelected",function(i){return b.Ec(t),b.kc().selectedDriver(i)}),b.Kc(11,T,2,0,"mat-option",31),b.Kc(12,O,3,3,"mat-option",34),b.Yb(),b.Zb(13,"button",35),b.gc("click",function(){b.Ec(t);const i=b.Cc(7);return b.kc().filteringDrivers(i)}),b.Ub(14,"i",36),b.Yb(),b.Kc(15,S,2,0,"button",37),b.Yb(),b.Yb(),b.Yb()}if(2&t){const t=b.Cc(10),i=b.kc();b.Fb(2),b.qc("appearance",i.matInputAppearance)("color",i.matInputsColor),b.Fb(2),b.Nc(" ",b.mc(5,9,"appNotifications.captainName")," "),b.Fb(2),b.qc("matAutocomplete",t),b.Fb(2),b.qc("ngIf",!i.driverId),b.Fb(1),b.qc("displayWith",i.displayFn),b.Fb(2),b.qc("ngIf",i.driversIsLoading),b.Fb(1),b.qc("ngForOf",i.filteredDriversOptions),b.Fb(3),b.qc("ngIf",i.driverId)}}function y(t,i){if(1&t){const t=b.ac();b.Zb(0,"mat-chip",52),b.gc("removed",function(){const i=b.Ec(t).$implicit;return b.kc(2).remove(i)}),b.Lc(1),b.Ub(2,"i",53),b.Yb()}if(2&t){const t=i.$implicit;b.Fb(1),b.Oc(" ",t.firstName," ",t.familyName," ")}}function j(t,i){1&t&&(b.Zb(0,"mat-option",54),b.Ub(1,"mat-spinner",39),b.Yb())}function x(t,i){if(1&t&&(b.Zb(0,"mat-option",40),b.Lc(1),b.Yb()),2&t){const t=i.$implicit;b.qc("value",t),b.Fb(1),b.Oc(" ",t.firstName," ",t.familyName," ")}}function k(t,i){1&t&&(b.Zb(0,"mat-hint"),b.Zb(1,"span",38),b.Lc(2),b.lc(3,"translate"),b.Yb(),b.Yb()),2&t&&(b.Fb(2),b.Nc(" ",b.mc(3,1,"appNotifications.selectFromSelections")," "))}function q(t,i){if(1&t){const t=b.ac();b.Zb(0,"div",1),b.Zb(1,"div",43),b.Zb(2,"mat-form-field",28),b.Zb(3,"mat-label"),b.Lc(4),b.lc(5,"translate"),b.Yb(),b.Zb(6,"mat-chip-list",null,44),b.Kc(8,y,3,2,"mat-chip",45),b.Zb(9,"input",46,47),b.gc("keyup.enter",function(){b.Ec(t);const i=b.Cc(10);return b.kc().filteringDrivers(i)}),b.lc(11,"translate"),b.Yb(),b.Yb(),b.Zb(12,"mat-autocomplete",48,49),b.gc("optionSelected",function(i){return b.Ec(t),b.kc().driverSelected(i)}),b.Kc(14,j,2,0,"mat-option",50),b.Kc(15,x,2,3,"mat-option",34),b.Yb(),b.Zb(16,"button",35),b.gc("click",function(){b.Ec(t);const i=b.Cc(10);return b.kc().filteringDrivers(i),i.focus()}),b.Ub(17,"i",51),b.Yb(),b.Kc(18,k,4,3,"mat-hint",31),b.Yb(),b.Yb(),b.Yb()}if(2&t){const t=b.Cc(7),i=b.Cc(13),e=b.kc();b.Fb(2),b.qc("appearance",e.matInputAppearance)("color",e.matInputsColor),b.Fb(2),b.Nc(" ",b.mc(5,10,"appNotifications.listOfCaptains")," "),b.Fb(4),b.qc("ngForOf",e.driversChips),b.Fb(1),b.qc("placeholder",b.mc(11,12,"appNotifications.captainName"))("matAutocomplete",i)("matChipInputFor",t),b.Fb(5),b.qc("ngIf",e.driversIsLoading),b.Fb(1),b.qc("ngForOf",e.filteredDriversOptions),b.Fb(3),b.qc("ngIf",!e.driversChips.length)}}function U(t,i){if(1&t){const t=b.ac();b.Zb(0,"div",1),b.Zb(1,"div",55),b.Zb(2,"button",56),b.gc("click",function(){return b.Ec(t),b.kc().send()}),b.Lc(3),b.lc(4,"translate"),b.Yb(),b.Yb(),b.Yb()}2&t&&(b.Fb(3),b.Nc(" ",b.mc(4,1,"appNotifications.sendNotification")," "))}const M=[{path:"",component:(()=>{let t=class{constructor(t,i,e,n){this.translate=t,this.loader=i,this.driverService=e,this.systemService=n,this.currentLang="ar"===localStorage.getItem("sender-manage-lang")?"ar":"en",this.matInputAppearance=r.a.inputsStyleAppearance,this.matInputsColor=r.a.inputsStyleColor,this.objectToApi={Topic:null,UserId:null,UserIds:null,Title:null,Message:null},this.notificationTo="allCaptains",this.driverId=null,this.driversIsLoading=!1,this.filteredDriversOptions=[],this.fruits=["Lemon"],this.driversChips=[]}filteringDrivers(t){this.driversIsLoading=!0;let i=t.value;this.driverService.getAllDriversByFullName({page:1,numberOfObjectsPerPage:20},i).pipe(Object(s.b)(this)).subscribe(t=>{const e=i.toLowerCase();this.filteredDriversOptions=t.drivers.filter(t=>-1!==t.firstName.toLowerCase().indexOf(e)||-1!==t.familyName.toLowerCase().indexOf(e)),this.driversIsLoading=!1})}selectedDriver(t){this.driverId=t.option.value.id}displayFn(t){return t&&t.firstName+" "+t.familyName}remove(t){const i=this.driversChips.indexOf(t);i>=0&&(this.driversChips.splice(i,1),this.fillDriversIdsForObjectApi())}driverSelected(t){this.driversChips.find(i=>i.id===t.option.value.id)?this.driversInput.nativeElement.value="":(this.driversChips.push(t.option.value),this.driversInput.nativeElement.value="",this.fillDriversIdsForObjectApi())}fillDriversIdsForObjectApi(){this.objectToApi.UserIds=this.driversChips.map(t=>t.id)}ngOnInit(){this.getCurrentLang()}getCurrentLang(){this.translate.onLangChange.pipe(Object(s.b)(this)).subscribe(t=>{this.currentLang="ar"===t.lang?"ar":"en"})}clearSendingValue(t){t&&(t.value=null),this.driverId=null,this.driversChips=[],this.objectToApi={Topic:null,UserId:null,UserIds:null,Title:null,Message:null}}send(){this.loader.showLoader$.next(!0),this.notificationTo.toLocaleLowerCase().includes("captain")&&(this.objectToApi.Topic="captains",this.driverId?(this.objectToApi.UserId=this.driverId,delete this.objectToApi.UserIds,this.systemService.sendNotificationsToUsers(this.objectToApi).pipe(Object(s.b)(this)).subscribe(t=>{this.loader.showLoader$.next(!1),p.a.fire({title:`${this.translate.instant("appNotifications.sendNotificationSucceded")}`,toast:!0,showConfirmButton:!1,timer:5e3,timerProgressBar:!0,icon:"success",position:"en"===this.currentLang?"top-right":"top-left"})},t=>{this.loader.showLoader$.next(!1),p.a.fire({title:`${this.translate.instant("shared.somethingWentWrong")}`,toast:!0,showConfirmButton:!1,timer:5e3,timerProgressBar:!0,icon:"error",position:"en"===this.currentLang?"top-right":"top-left"})})):this.driversChips.length?(delete this.objectToApi.UserId,this.systemService.sendNotificationsToUsers(this.objectToApi).pipe(Object(s.b)(this)).subscribe(t=>{this.loader.showLoader$.next(!1),p.a.fire({title:`${this.translate.instant("appNotifications.sendNotificationSucceded")}`,toast:!0,showConfirmButton:!1,timer:5e3,timerProgressBar:!0,icon:"success",position:"en"===this.currentLang?"top-right":"top-left"})},t=>{this.loader.showLoader$.next(!1),p.a.fire({title:`${this.translate.instant("shared.somethingWentWrong")}`,toast:!0,showConfirmButton:!1,timer:5e3,timerProgressBar:!0,icon:"error",position:"en"===this.currentLang?"top-right":"top-left"})})):(delete this.objectToApi.UserId,delete this.objectToApi.UserIds,this.systemService.sendNotificationsToUsers(this.objectToApi).pipe(Object(s.b)(this)).subscribe(t=>{this.loader.showLoader$.next(!1),p.a.fire({title:`${this.translate.instant("appNotifications.sendNotificationSucceded")}`,toast:!0,showConfirmButton:!1,timer:5e3,timerProgressBar:!0,icon:"success",position:"en"===this.currentLang?"top-right":"top-left"})},t=>{this.loader.showLoader$.next(!1),p.a.fire({title:`${this.translate.instant("shared.somethingWentWrong")}`,toast:!0,showConfirmButton:!1,timer:5e3,timerProgressBar:!0,icon:"error",position:"en"===this.currentLang?"top-right":"top-left"})})))}};return t.\u0275fac=function(i){return new(i||t)(b.Tb(d.d),b.Tb(m.a),b.Tb(f.a),b.Tb(u.a))},t.\u0275cmp=b.Nb({type:t,selectors:[["app-app-notifications"]],viewQuery:function(t,i){if(1&t&&b.Qc(L,1),2&t){let t;b.Bc(t=b.hc())&&(i.driversInput=t.first)}},decls:73,vars:63,consts:[[1,"py-4"],[1,"row"],[1,"my-2","col-12"],[1,"card"],[1,"card-header","card-header-shadow","gradient-default","text-white","border-0","inside-card"],[1,"font-weight-normal","mb-2","text-capitalize"],[1,"card-text","mb-1"],[1,"card-body"],[1,"form-group","col-12","col-sm-8","col-md-7","col-lg-6","col-xl-4"],[1,"w-100","text-capitalize","mt-2",3,"appearance","color"],["name","notificationTo",3,"ngModel","ngModelChange","selectionChange"],["value","allCaptains"],["value","oneCaptain"],["value","listOfCaptains"],["value","allAgents","disabled",""],["value","oneAgent","disabled",""],["value","listOfAgents","disabled",""],["value","allAdmins","disabled",""],["value","oneAdmin","disabled",""],["value","listOfAdmins","disabled",""],["value","allSupports","disabled",""],["value","oneSupport","disabled",""],["value","listOfSupports","disabled",""],["class","row",4,"ngIf"],[1,"text-capitalize","w-100",3,"appearance","color"],["matInput","","name","notificationTitle",3,"ngModel","ngModelChange"],[1,"form-group","col-12","col-md-8"],["matInput","","name","notificationMessage",3,"ngModel","ngModelChange"],[1,"w-100","text-capitalize",3,"appearance","color"],["type","text","matInput","",3,"matAutocomplete"],["driverInput",""],[4,"ngIf"],[3,"displayWith","optionSelected"],["driverAutoComplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-button","","matSuffix","","mat-icon-button","",3,"click"],[1,"fa","fa-search"],["mat-button","","matSuffix","","mat-icon-button","",3,"click",4,"ngIf"],[1,"text-danger","h6"],["diameter","30"],[3,"value"],[1,"mx-2"],[1,"fa","fa-times","text-danger"],[1,"form-group","col-12"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],[3,"placeholder","matAutocomplete","matChipInputFor","keyup.enter"],["driversInput",""],[3,"optionSelected"],["driversAutoComplete","matAutocomplete"],["disabled","",4,"ngIf"],[1,"fa","fa-search","text-primary"],[3,"removed"],["matChipRemove","",1,"fa","fa-times-circle","mx-1","mt-1"],["disabled",""],[1,"col-md-12","d-flex","justify-content-center"],["type","button",1,"btn","btn-success","text-capitalize",3,"click"]],template:function(t,i){1&t&&(b.Zb(0,"div",0),b.Zb(1,"div",1),b.Zb(2,"div",2),b.Zb(3,"div",3),b.Zb(4,"div",4),b.Zb(5,"h3",5),b.Lc(6),b.lc(7,"translate"),b.Yb(),b.Zb(8,"p",6),b.Lc(9),b.lc(10,"translate"),b.Yb(),b.Yb(),b.Zb(11,"div",7),b.Zb(12,"form"),b.Zb(13,"div",1),b.Zb(14,"div",8),b.Zb(15,"mat-form-field",9),b.Zb(16,"mat-label"),b.Lc(17),b.lc(18,"translate"),b.Yb(),b.Zb(19,"mat-select",10),b.gc("ngModelChange",function(t){return i.notificationTo=t})("selectionChange",function(){return i.clearSendingValue()}),b.Zb(20,"mat-option",11),b.Lc(21),b.lc(22,"translate"),b.Yb(),b.Zb(23,"mat-option",12),b.Lc(24),b.lc(25,"translate"),b.Yb(),b.Zb(26,"mat-option",13),b.Lc(27),b.lc(28,"translate"),b.Yb(),b.Zb(29,"mat-option",14),b.Lc(30),b.lc(31,"translate"),b.Yb(),b.Zb(32,"mat-option",15),b.Lc(33),b.lc(34,"translate"),b.Yb(),b.Zb(35,"mat-option",16),b.Lc(36),b.lc(37,"translate"),b.Yb(),b.Zb(38,"mat-option",17),b.Lc(39),b.lc(40,"translate"),b.Yb(),b.Zb(41,"mat-option",18),b.Lc(42),b.lc(43,"translate"),b.Yb(),b.Zb(44,"mat-option",19),b.Lc(45),b.lc(46,"translate"),b.Yb(),b.Zb(47,"mat-option",20),b.Lc(48),b.lc(49,"translate"),b.Yb(),b.Zb(50,"mat-option",21),b.Lc(51),b.lc(52,"translate"),b.Yb(),b.Zb(53,"mat-option",22),b.Lc(54),b.lc(55,"translate"),b.Yb(),b.Yb(),b.Yb(),b.Yb(),b.Yb(),b.Kc(56,w,16,11,"div",23),b.Kc(57,q,19,14,"div",23),b.Zb(58,"div",1),b.Zb(59,"div",8),b.Zb(60,"mat-form-field",24),b.Zb(61,"mat-label"),b.Lc(62),b.lc(63,"translate"),b.Yb(),b.Zb(64,"input",25),b.gc("ngModelChange",function(t){return i.objectToApi.Title=t}),b.Yb(),b.Yb(),b.Yb(),b.Yb(),b.Zb(65,"div",1),b.Zb(66,"div",26),b.Zb(67,"mat-form-field",24),b.Zb(68,"mat-label"),b.Lc(69),b.lc(70,"translate"),b.Yb(),b.Zb(71,"textarea",27),b.gc("ngModelChange",function(t){return i.objectToApi.Message=t}),b.Yb(),b.Yb(),b.Yb(),b.Yb(),b.Kc(72,U,5,3,"div",23),b.Yb(),b.Yb(),b.Yb(),b.Yb(),b.Yb(),b.Yb()),2&t&&(b.Fb(6),b.Nc(" ",b.mc(7,29,"appNotifications.applicationNotifications")," "),b.Fb(3),b.Nc(" ",b.mc(10,31,"appNotifications.addNewNotification")," "),b.Fb(6),b.qc("appearance",i.matInputAppearance)("color",i.matInputsColor),b.Fb(2),b.Nc(" ",b.mc(18,33,"appNotifications.sendNotificationTo")," "),b.Fb(2),b.qc("ngModel",i.notificationTo),b.Fb(2),b.Nc(" ",b.mc(22,35,"appNotifications.allCaptains")," "),b.Fb(3),b.Nc(" ",b.mc(25,37,"appNotifications.oneCaptain")," "),b.Fb(3),b.Nc(" ",b.mc(28,39,"appNotifications.listOfCaptains")," "),b.Fb(3),b.Nc(" ",b.mc(31,41,"appNotifications.allAgents")," "),b.Fb(3),b.Nc(" ",b.mc(34,43,"appNotifications.oneAgent")," "),b.Fb(3),b.Nc(" ",b.mc(37,45,"appNotifications.listOfAgents")," "),b.Fb(3),b.Nc(" ",b.mc(40,47,"appNotifications.allAdmins")," "),b.Fb(3),b.Nc(" ",b.mc(43,49,"appNotifications.oneAdmin")," "),b.Fb(3),b.Nc(" ",b.mc(46,51,"appNotifications.listOfAdmins")," "),b.Fb(3),b.Nc(" ",b.mc(49,53,"appNotifications.allSupports")," "),b.Fb(3),b.Nc(" ",b.mc(52,55,"appNotifications.oneSupport")," "),b.Fb(3),b.Nc(" ",b.mc(55,57,"appNotifications.listOfSupports")," "),b.Fb(2),b.qc("ngIf","oneCaptain"===i.notificationTo),b.Fb(1),b.qc("ngIf","listOfCaptains"===i.notificationTo),b.Fb(3),b.qc("appearance",i.matInputAppearance)("color",i.matInputsColor),b.Fb(2),b.Nc(" ",b.mc(63,59,"appNotifications.notificationTitle")," "),b.Fb(2),b.qc("ngModel",i.objectToApi.Title),b.Fb(3),b.qc("appearance",i.matInputAppearance)("color",i.matInputsColor),b.Fb(2),b.Nc(" ",b.mc(70,61,"appNotifications.notificationMessage")," "),b.Fb(2),b.qc("ngModel",i.objectToApi.Message),b.Fb(1),b.qc("ngIf",i.objectToApi.Title&&i.objectToApi.Message))},directives:[h.v,h.m,h.n,g.b,g.f,v.a,h.l,h.o,N.j,n.l,F.b,h.d,Y.c,Y.a,n.k,Z.a,g.g,g.e,I.b,C.c,C.b,C.a,C.d],pipes:[d.c],styles:[""]}),t=Object(c.a)([Object(s.a)({checkProperties:!0})],t),t})()}];let $=(()=>{class t{}return t.\u0275mod=b.Rb({type:t}),t.\u0275inj=b.Qb({factory:function(i){return new(i||t)},imports:[[a.f.forChild(M)],a.f]}),t})(),D=(()=>{class t{}return t.\u0275mod=b.Rb({type:t}),t.\u0275inj=b.Qb({factory:function(i){return new(i||t)},providers:[],imports:[[n.c,$,o.a]]}),t})()}}]);