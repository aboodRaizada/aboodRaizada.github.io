(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"4fi/":function(e,t,i){"use strict";i.r(t),i.d(t,"ApplicationModule",function(){return v});var n=i("SVse"),o=i("FpXt"),a=i("iInd"),d=i("mrSG"),r=i("0sX0"),s=i("Iab2"),l=i("3bzS"),c=i("8Y7J"),b=i("jy+X"),p=i("SOeY"),h=i("TSSN"),f=i("s7LF"),g=i("hvj1");function m(e,t){if(1&e){const e=c.ac();c.Zb(0,"div",27),c.Zb(1,"button",28),c.gc("click",function(){return c.Ec(e),c.kc().download()}),c.Lc(2),c.lc(3,"translate"),c.Yb(),c.Yb()}2&e&&(c.Fb(2),c.Nc(" ",c.mc(3,1,"addEditApp.download")," "))}const u=[{path:"",component:(()=>{let e=class{constructor(e,t,i,n){this.activatedRoute=e,this.loader=t,this.systemService=i,this.translate=n,this.currentLang="ar"===localStorage.getItem("sender-manage-lang")?"ar":"en",this.state="",this.appModel=new r.d,this.versionId=0,this.formData=new FormData,this.blob=new Blob}ngOnInit(){this.activatedRoute.params.subscribe(e=>{this.versionId=Number.parseInt(e.id),"0"===e.id?this.state="add":(this.state="edit",this.loader.showLoader$.next(!0),this.loadAndroidVersion(this.versionId))}),this.getCurrentLang()}getCurrentLang(){this.translate.onLangChange.pipe(Object(l.b)(this)).subscribe(e=>{this.currentLang="ar"===e.lang?"ar":"en"})}loadAndroidVersion(e){this.systemService.getAndroidVersion(this.versionId).pipe(Object(l.b)(this)).subscribe(e=>{this.loader.showLoader$.next(!1),this.appModel=e})}onAppFileChange(e){if(!e||!e.target||!e.target.files||0===e.target.files.length)return;const t=e.target.files[0];let i=t.type.split("/")[1];"vnd.android.package-archive"===i&&(i="apk");const n="Android_"+Math.floor((new Date).valueOf()*Math.random())+"."+i;this.appModel.fileExtension=i,this.appModel.fileName=n,this.appModel.file=new File([t],n,{type:t.type})}prepareFile(){null!=this.appModel.file&&this.formData.append("Android",this.appModel.file,this.appModel.file.name)}showTemplate(){}save(e){this.prepareFile(),this.loader.showLoader$.next(!0),"add"===this.state?this.systemService.addAndroidVersion(this.appModel).pipe(Object(l.b)(this)).subscribe(t=>{var i;if(null!=t&&t>0){if(null==(null===(i=this.appModel)||void 0===i?void 0:i.file))return this.loader.showLoader$.next(!1),void e.fire();this.systemService.submitAndroidVersionFile(this.formData).pipe(Object(l.b)(this)).subscribe(t=>{this.loader.showLoader$.next(!1),1==t&&e.fire()},e=>{this.loader.showLoader$.next(!1),console.log(e)})}else this.loader.showLoader$.next(!1)},e=>{console.log(e),this.loader.showLoader$.next(!1)}):this.systemService.updateAndroidVersion(this.appModel).pipe(Object(l.b)(this)).subscribe(t=>{var i;if(1==t){if(null==(null===(i=this.appModel)||void 0===i?void 0:i.file))return this.loader.showLoader$.next(!1),void e.fire();this.systemService.submitAndroidVersionFile(this.formData).pipe(Object(l.b)(this)).subscribe(t=>{this.loader.showLoader$.next(!1),1==t&&e.fire()})}else this.loader.showLoader$.next(!1)},e=>{console.log(e),this.loader.showLoader$.next(!1)})}download(){this.loader.showLoader$.next(!0),this.systemService.downloadAndroidFile(this.appModel.fileName).pipe(Object(l.b)(this)).subscribe(e=>{this.loader.showLoader$.next(!1);let t=new Blob([e],{type:"application/vnd.android.package-archive; "});window.URL.createObjectURL(t),s.saveAs(t,"sender.apk")},e=>{this.loader.showLoader$.next(!1),console.log("%cError downloading the file","background: #f00; color: #fff")})}};return e.\u0275fac=function(t){return new(t||e)(c.Tb(a.a),c.Tb(b.a),c.Tb(p.a),c.Tb(h.d))},e.\u0275cmp=c.Nb({type:e,selectors:[["app-application"]],decls:59,vars:45,consts:[[1,"py-4"],[1,"row"],[1,"my-2","col-12"],[1,"card"],[1,"card-header","card-header-shadow","gradient-default","text-white","border-0","inside-card"],[1,"font-weight-normal","mb-2","text-capitalize"],[1,"card-text","mb-1"],[1,"card-body"],[1,"form-group","col-lg-4","col-md-6"],[1,"text-capitalize"],["type","text","name","name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","Version",1,"form-control",3,"ngModel","ngModelChange"],["type","file","name","file",1,"form-control",3,"change"],["disabled","disabled","type","text","name","fileExtension",1,"form-control",3,"ngModel","ngModelChange"],["disabled","disabled","type","text","name","fileName",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","col-lg-8","col-md-12"],["name","Description","id","","rows","4",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","col-12"],[1,"form-check-for-android"],["type","checkbox","id","switch","name","isCurrent",1,"form-check-android",3,"ngModel","ngModelChange"],["for","switch",1,"form-check-android-label"],["for","switch",1,"mx-3"],["class","col-md-12 d-flex justify-content-start",4,"ngIf"],[1,"col-md-12","d-flex","justify-content-center"],[1,"btn","btn-info","text-capitalize",3,"click"],["timer","3000","timerProgressBar","true","icon","success","position","top-end",3,"toast","showConfirmButton","title"],["successedSave",""],[1,"col-md-12","d-flex","justify-content-start"],[1,"btn","btn-warning","text-capitalize",3,"click"]],template:function(e,t){if(1&e){const e=c.ac();c.Zb(0,"div",0),c.Zb(1,"div",1),c.Zb(2,"div",2),c.Zb(3,"div",3),c.Zb(4,"div",4),c.Zb(5,"h3",5),c.Lc(6),c.lc(7,"translate"),c.lc(8,"translate"),c.Yb(),c.Zb(9,"p",6),c.Lc(10),c.lc(11,"translate"),c.Yb(),c.Yb(),c.Zb(12,"div",7),c.Zb(13,"form",1),c.Zb(14,"div",8),c.Zb(15,"label",9),c.Lc(16),c.lc(17,"translate"),c.Yb(),c.Zb(18,"input",10),c.gc("ngModelChange",function(e){return t.appModel.name=e}),c.Yb(),c.Yb(),c.Zb(19,"div",8),c.Zb(20,"label",9),c.Lc(21),c.lc(22,"translate"),c.Yb(),c.Zb(23,"input",11),c.gc("ngModelChange",function(e){return t.appModel.version=e}),c.Yb(),c.Yb(),c.Zb(24,"div",8),c.Zb(25,"label",9),c.Lc(26),c.lc(27,"translate"),c.Yb(),c.Zb(28,"input",12),c.gc("change",function(e){return t.onAppFileChange(e)}),c.Yb(),c.Yb(),c.Zb(29,"div",8),c.Zb(30,"label",9),c.Lc(31),c.lc(32,"translate"),c.Yb(),c.Zb(33,"input",13),c.gc("ngModelChange",function(e){return t.appModel.fileExtension=e}),c.Yb(),c.Yb(),c.Zb(34,"div",8),c.Zb(35,"label",9),c.Lc(36),c.lc(37,"translate"),c.Yb(),c.Zb(38,"input",14),c.gc("ngModelChange",function(e){return t.appModel.fileName=e}),c.Yb(),c.Yb(),c.Zb(39,"div",15),c.Zb(40,"label",9),c.Lc(41),c.lc(42,"translate"),c.Yb(),c.Zb(43,"textarea",16),c.gc("ngModelChange",function(e){return t.appModel.description=e}),c.Yb(),c.Yb(),c.Zb(44,"div",17),c.Zb(45,"div",18),c.Zb(46,"input",19),c.gc("ngModelChange",function(e){return t.appModel.isCurrent=e}),c.Yb(),c.Ub(47,"label",20),c.Zb(48,"label",21),c.Lc(49),c.lc(50,"translate"),c.Yb(),c.Yb(),c.Yb(),c.Kc(51,m,4,3,"div",22),c.Zb(52,"div",23),c.Zb(53,"button",24),c.gc("click",function(){c.Ec(e);const i=c.Cc(57);return t.save(i)}),c.Lc(54),c.lc(55,"translate"),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Yb(),c.Ub(56,"swal",25,26),c.lc(58,"translate")}2&e&&(c.Fb(6),c.Oc(" ",c.mc(7,21,"addEditApp."+t.state)," ",c.mc(8,23,"addEditApp.app")," "),c.Fb(4),c.Nc(" ",c.mc(11,25,"addEditApp.discription")," "),c.Fb(6),c.Mc(c.mc(17,27,"addEditApp.name")),c.Fb(2),c.qc("ngModel",t.appModel.name),c.Fb(3),c.Mc(c.mc(22,29,"addEditApp.version")),c.Fb(2),c.qc("ngModel",t.appModel.version),c.Fb(3),c.Mc(c.mc(27,31,"addEditApp.file")),c.Fb(5),c.Mc(c.mc(32,33,"addEditApp.fileExtension")),c.Fb(2),c.qc("ngModel",t.appModel.fileExtension),c.Fb(3),c.Mc(c.mc(37,35,"addEditApp.fileName")),c.Fb(2),c.qc("ngModel",t.appModel.fileName),c.Fb(3),c.Mc(c.mc(42,37,"addEditApp.description")),c.Fb(2),c.qc("ngModel",t.appModel.description),c.Fb(3),c.qc("ngModel",t.appModel.isCurrent),c.Fb(3),c.Mc(c.mc(50,39,"addEditApp.isCurrent")),c.Fb(2),c.qc("ngIf","edit"===t.state),c.Fb(3),c.Nc(" ",c.mc(55,41,"addEditApp.save")," "),c.Fb(2),c.rc("title",c.mc(58,43,"addEditApp.saveSucceeded")),c.qc("toast",!0)("showConfirmButton",!1))},directives:[f.v,f.m,f.n,f.d,f.l,f.o,f.a,n.l,g.a],pipes:[h.c],styles:[".form-check-android-label[_ngcontent-%COMP%]{margin-left:0;margin-right:0}"]}),e=Object(d.a)([Object(l.a)({checkProperties:!0})],e),e})()}];let M=(()=>{class e{}return e.\u0275mod=c.Rb({type:e}),e.\u0275inj=c.Qb({factory:function(t){return new(t||e)},imports:[[a.f.forChild(u)],a.f]}),e})(),v=(()=>{class e{}return e.\u0275mod=c.Rb({type:e}),e.\u0275inj=c.Qb({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,M,o.a]]}),e})()}}]);